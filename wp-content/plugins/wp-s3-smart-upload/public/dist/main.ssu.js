!function(e){function t(t){for(var r,s,l=t[0],i=t[1],u=t[2],d=0,p=[];d<l.length;d++)s=l[d],n[s]&&p.push(n[s][0]),n[s]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(c&&c(t);p.length;)p.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,l=1;l<a.length;l++){var i=a[l];0!==n[i]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var r={},n={0:0},o=[];function s(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=r,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(a,r,function(t){return e[t]}.bind(null,r));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var l=window.webpackJsonp=window.webpackJsonp||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var c=i;o.push([465,1]),a()}({139:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(a(495)),n=a(73);!function(){var t=a(14).enterModule;t&&t(e)}();var o={MESSAGE:{ERROR:"Please see Debugging in WordPress for more information."},createAttachmentMetadata:function(e,t){return new Promise(function(a,o){r.default.create((0,n.AXIOS_CONFIG)()).post(n.API.WP_MEDIA,{signedUrl:t,file:e}).then(function(e){return a(e)}).catch(function(e){return o(e)})})},addFileToMedia:function(e,t){return new Promise(function(a,o){r.default.create((0,n.AXIOS_CONFIG)()).post(n.API.ADD_FILE_TO_MEDIA,{url:t,file:e}).then(function(e){return a(e)}).catch(function(e){return o(e)})})},getAwsOptions:function(){var e=r.default.create((0,n.AXIOS_CONFIG)()).get(n.API.AWS_OPTIONS);return{type:n.ACTIONS.FETCH_AWS_OPTIONS,payload:e}},updateAwsOptions:function(e){var t=r.default.create((0,n.AXIOS_CONFIG)()).post(n.API.AWS_OPTIONS,e);return{type:n.ACTIONS.UPDATE_AWS_OPTIONS,payload:t}},buildAwsStack:function(e){var t=r.default.create((0,n.AXIOS_CONFIG)()).post(n.API.BUILD_AWS_STACK,e);return{type:n.ACTIONS.BUILD_AWS_STACK,payload:t}},getBuildAwsStackStatus:function(){var e=r.default.create((0,n.AXIOS_CONFIG)()).get(n.API.BUILD_AWS_STACK);return{type:n.ACTIONS.BUILD_AWS_STACK_STATUS,payload:e}},getPluginInfo:function(){var e=r.default.create((0,n.AXIOS_CONFIG)()).get(n.API.GET_PLUGIN_INFO);return{type:n.ACTIONS.GET_PLUGIN_INFO,payload:e}},fileIsExisted:function(e){return r.default.create((0,n.AXIOS_CONFIG)()).post(n.API.S3_FILE,{file_name:e})},listObjects:function(e){return r.default.create((0,n.AXIOS_CONFIG)()).get(n.API.S3_OBJECTS,{params:{prefix:e}})},setObjectAcl:function(e,t){return r.default.create((0,n.AXIOS_CONFIG)()).post(n.API.SET_OBJECT_ACL,{key:e,acl:t})},getPreSignedUploadURL:function(e){var t=e.objectName,a=e.contentType,o=e.uploadFolder,s=e.acl,l=void 0===s?"":s;return r.default.create((0,n.AXIOS_CONFIG)()).get(n.API.PRESIGNED_URL,{params:{objectName:t,contentType:a,uploadFolder:o},headers:{"ssu-public-acl":l}})}},s=o;t.default=s,function(){var t=a(14).default,r=a(14).leaveModule;t&&(t.register(o,"WP_API","/root/s3-smart-upload/client/app/app/actions/api.js"),t.register(s,"default","/root/s3-smart-upload/client/app/app/actions/api.js"),r(e))}()}).call(this,a(19)(e))},435:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],r=!0,n=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done)&&(a.push(s.value),!t||a.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(n)throw o}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=a(0),o=p(n),s=a(125),l=a(917),i=p(a(913)),u=a(914),c=p(a(139)),d=a(436);function p(e){return e&&e.__esModule?e:{default:e}}!function(){var t=a(14).enterModule;t&&t(e)}();var f=s.Upload.Dragger;s.message.config({top:50,duration:2});var _=function(e){var t=e.uploadFolder,a=(0,n.useState)(!1),p=r(a,2),_=p[0],m=p[1],g=(0,n.useState)(!1),h=r(g,2),v=h[0],j=h[1],S={name:"file",multiple:!0,onChange:function(e){var t=e.file.status;"done"===t?s.message.success("File uploaded successfully"):"error"===t&&s.message.error("File upload failed")},beforeUpload:function(e){return new Promise(function(t,a){return i.default.isAllowedFileSize(e)?i.default.isS3FileSize(e)?void t():(s.message.error(d.MESSAGE.SSU_FILE_MAX_SIZE_ERROR),void a(new Error(d.MESSAGE.SSU_FILE_MAX_SIZE_ERROR))):(s.message.error(d.MESSAGE.SSU_FILE_MAX_FILE_ERROR),void a(new Error(d.MESSAGE.SSU_FILE_MAX_FILE_ERROR)))})},showUploadList:{showRemoveIcon:!1},progress:{strokeColor:{"0%":"#108ee9","100%":"#87d068"},strokeWidth:3,format:function(e){return parseFloat(e.toFixed(2))+"%"}},customRequest:function(e){var a=e.onSuccess,r=e.onError,n=e.file,o=e.onProgress;(function(e){return new Promise(function(a,r){var n=e.name,o=e.type;c.default.getPreSignedUploadURL({objectName:n,contentType:o,uploadFolder:t,acl:""}).then(function(e){var t=e.data,r=t.key,n=t.signedUrl;a({key:r,url:n})}).catch(r)})})(n).then(function(e){var t=e.key,s=e.url,l=n.type,i=new XMLHttpRequest;i.open("PUT",s,!0),i.setRequestHeader("Content-Type",l),i.onload=function(){if(200===i.status){var e=[];v&&e.push(function(e,t){var a=t.split("?")[0];return new Promise(function(t,r){if(e.type.match(/image\/*/))(0,u.getSizeForImage)(e).then(function(e){var t={name:e.name,size:e.size,width:e.width,height:e.height};return c.default.createAttachmentMetadata(t,a)}).then(t).catch(r);else{var n={name:e.name,size:e.size};c.default.createAttachmentMetadata(n,a).then(t).catch(r)}})}(n,s)),_&&e.push(c.default.setObjectAcl(t,"public-read")),e.length>0?Promise.all(e).then(function(){return a()}):a()}else r()},i.onerror=function(){r()},i.upload.onprogress=function(e){o({percent:e.loaded/e.total*100})},i.send(n)}).catch(r)}};return o.default.createElement("div",{style:{padding:"10px"}},o.default.createElement("div",null,o.default.createElement(s.Checkbox,{checked:_,onChange:function(e){m(e.target.checked)}},"Make it public")),o.default.createElement("div",null,o.default.createElement(s.Checkbox,{checked:v,onChange:function(e){j(e.target.checked)}},"Show it under Media Library")),o.default.createElement(f,S,o.default.createElement("p",{className:"ant-upload-drag-icon"},o.default.createElement(l.InboxOutlined,null)),o.default.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"),o.default.createElement("p",{className:"ant-upload-hint"},"Support for single or bulk upload")))},m=_;t.default=m,function(){var t=a(14).default,r=a(14).leaveModule;t&&(t.register(f,"Dragger","/root/s3-smart-upload/client/app/app/components/Uploader/index.js"),t.register(_,"Uploader","/root/s3-smart-upload/client/app/app/components/Uploader/index.js"),t.register(m,"default","/root/s3-smart-upload/client/app/app/components/Uploader/index.js"),r(e))}()}).call(this,a(19)(e))},436:function(e,t,a){"use strict";t.getProviderName=function(){switch(window.ssuData.provider){case"aws":return"S3";case"wasabi":return"Wasabi";default:return"S3"}},t.MESSAGE=window.ssuData.messages},465:function(e,t,a){a(466),e.exports=a(916)},466:function(e,t,a){"use strict";var r=i(a(0)),n=i(a(9)),o=a(29),s=i(a(473)),l=i(a(493));function i(e){return e&&e.__esModule?e:{default:e}}a(915),document.addEventListener("DOMContentLoaded",function(){n.default.render(r.default.createElement(o.Provider,{store:s.default},r.default.createElement(l.default,null)),document.getElementById("s3-smart-upload-app"))})},473:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=s(a(474)),n=a(22),o=s(a(478));function s(e){return e&&e.__esModule?e:{default:e}}!function(){var t=a(14).enterModule;t&&t(e)}();var l=(0,n.compose)((0,n.applyMiddleware)(r.default))(n.createStore),i=l(o.default),u=i;t.default=u,function(){var t=a(14).default,r=a(14).leaveModule;t&&(t.register(l,"createStoreWithMiddleware","/root/s3-smart-upload/client/app/app/store.js"),t.register(i,"store","/root/s3-smart-upload/client/app/app/store.js"),t.register(u,"default","/root/s3-smart-upload/client/app/app/store.js"),r(e))}()}).call(this,a(19)(e))},478:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=a(22),n=a(918),o=a(204),s=d(a(487)),l=d(a(489)),i=d(a(490)),u=d(a(491)),c=d(a(492));function d(e){return e&&e.__esModule?e:{default:e}}!function(){var t=a(14).enterModule;t&&t(e)}();var p=(0,r.combineReducers)({form:n.reducer,awsOptions:s.default,updateAwsConfigs:l.default,buildAwsStack:i.default,buildAwsStackStatus:u.default,pluginInfo:c.default,toastr:o.reducer}),f=p;t.default=f,function(){var t=a(14).default,r=a(14).leaveModule;t&&(t.register(p,"rootReducer","/root/s3-smart-upload/client/app/app/reducers/index.js"),t.register(f,"default","/root/s3-smart-upload/client/app/app/reducers/index.js"),r(e))}()}).call(this,a(19)(e))},487:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};t.updateAwsConfigs=i;var n=a(73);!function(){var t=a(14).enterModule;t&&t(e)}();var o={isError:!1,options:{aws_key:"",aws_secret:"",region:"us-west-1"},message:""},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case n.ACTIONS.FETCH_AWS_OPTIONS:return 200===t.payload.status?r({},e,{options:t.payload.data}):r({},e,{isError:!0,message:t.payload.response.data.message});default:return e}};t.default=s;var l=!1;function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case n.ACTIONS.UPDATE_AWS_OPTIONS:return 200===t.payload.status?t.payload.data:e;default:return e}}!function(){var t=a(14).default,r=a(14).leaveModule;t&&(t.register(o,"INITIAL_STATE","/root/s3-smart-upload/client/app/app/reducers/reducer_aws_configs.js"),t.register(l,"UPDATE_AWS_INITIAL_STATE","/root/s3-smart-upload/client/app/app/reducers/reducer_aws_configs.js"),t.register(i,"updateAwsConfigs","/root/s3-smart-upload/client/app/app/reducers/reducer_aws_configs.js"),t.register(s,"default","/root/s3-smart-upload/client/app/app/reducers/reducer_aws_configs.js"),r(e))}()}).call(this,a(19)(e))},489:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=a(73);!function(){var t=a(14).enterModule;t&&t(e)}();var n=!1;function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments[1];switch(t.type){case r.ACTIONS.UPDATE_AWS_OPTIONS:return 200===t.payload.status||e;default:return e}}!function(){var t=a(14).default,r=a(14).leaveModule;t&&(t.register(n,"UPDATE_AWS_INITIAL_STATE","/root/s3-smart-upload/client/app/app/reducers/reducer_update_aws_configs.js"),t.register(o,"updateAwsConfigs","/root/s3-smart-upload/client/app/app/reducers/reducer_update_aws_configs.js"),r(e))}()}).call(this,a(19)(e))},490:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=a(73);!function(){var t=a(14).enterModule;t&&t(e)}();var n={};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments[1];switch(t.type){case r.ACTIONS.BUILD_AWS_STACK:return 200===t.payload.status?t.payload.data:e;default:return e}}!function(){var t=a(14).default,r=a(14).leaveModule;t&&(t.register(n,"UPDATE_AWS_INITIAL_STATE","/root/s3-smart-upload/client/app/app/reducers/reducer_build_aws_stack.js"),t.register(o,"buildAwsStack","/root/s3-smart-upload/client/app/app/reducers/reducer_build_aws_stack.js"),r(e))}()}).call(this,a(19)(e))},491:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=a(73);!function(){var t=a(14).enterModule;t&&t(e)}();var n={data:{status:"Haven't built yet"}};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments[1];switch(t.type){case r.ACTIONS.BUILD_AWS_STACK_STATUS:return 200===t.payload.status?t.payload.data:e;default:return e}}!function(){var t=a(14).default,r=a(14).leaveModule;t&&(t.register(n,"UPDATE_AWS_INITIAL_STATE","/root/s3-smart-upload/client/app/app/reducers/reducer_build_aws_stack_status.js"),t.register(o,"buildAwsStack","/root/s3-smart-upload/client/app/app/reducers/reducer_build_aws_stack_status.js"),r(e))}()}).call(this,a(19)(e))},492:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=a(73);!function(){var t=a(14).enterModule;t&&t(e)}();var n={};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments[1];switch(t.type){case r.ACTIONS.GET_PLUGIN_INFO:return 200===t.payload.status?t.payload.data:e;default:return e}}!function(){var t=a(14).default,r=a(14).leaveModule;t&&(t.register(n,"INITIAL_STAGE","/root/s3-smart-upload/client/app/app/reducers/reducer_get_plugin_info.js"),t.register(o,"updateAwsConfigs","/root/s3-smart-upload/client/app/app/reducers/reducer_get_plugin_info.js"),r(e))}()}).call(this,a(19)(e))},493:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_reactReduxToastr=__webpack_require__(204),_reactReduxToastr2=_interopRequireDefault(_reactReduxToastr),_redux=__webpack_require__(22),_reactRedux=__webpack_require__(29),_AWSGuide=__webpack_require__(494),_AWSGuide2=_interopRequireDefault(_AWSGuide),_api=__webpack_require__(139),_api2=_interopRequireDefault(_api),_dashboard=__webpack_require__(514),_dashboard2=_interopRequireDefault(_dashboard);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}!function(){var e=__webpack_require__(14).enterModule;e&&e(module)}();var Root=function(_Component){function Root(){return _classCallCheck(this,Root),_possibleConstructorReturn(this,(Root.__proto__||Object.getPrototypeOf(Root)).apply(this,arguments))}return _inherits(Root,_Component),_createClass(Root,[{key:"componentWillMount",value:function(){var e=this,t=this.props.getPluginInfo;this.setState({loading:!0}),t().then(function(){e.setState({loading:!1})})}},{key:"render",value:function(){var e=_react2.default.createElement("div",{className:"ssu-loading"},"Loading data..."),t=this.state.loading,a=this.props.pluginInfo,r=a.awsConfigured?_react2.default.createElement(_dashboard2.default,{pluginInfo:a}):_react2.default.createElement(_AWSGuide2.default,null),n=t?e:r;return _react2.default.createElement("div",null,_react2.default.createElement(_reactReduxToastr2.default,{timeOut:4e3,newestOnTop:!1,preventDuplicates:!0,position:"top-right",transitionIn:"fadeIn",transitionOut:"fadeOut",progressBar:!0,closeOnToastrClick:!0}),_react2.default.createElement("h2",{className:"s3-title"},window.ssuData.plugin_name),n)}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),Root}(_react.Component),mapStateToProps=function(e){return{pluginInfo:e.pluginInfo}},mapActionsToProps=function(e){return(0,_redux.bindActionCreators)({getPluginInfo:_api2.default.getPluginInfo},e)},_default=(0,_reactRedux.connect)(mapStateToProps,mapActionsToProps)(Root);exports.default=_default,function(){var e=__webpack_require__(14).default,t=__webpack_require__(14).leaveModule;e&&(e.register(Root,"Root","/root/s3-smart-upload/client/app/app/config/Root.js"),e.register(mapStateToProps,"mapStateToProps","/root/s3-smart-upload/client/app/app/config/Root.js"),e.register(mapActionsToProps,"mapActionsToProps","/root/s3-smart-upload/client/app/app/config/Root.js"),e.register(_default,"default","/root/s3-smart-upload/client/app/app/config/Root.js"),t(module))}()}).call(this,__webpack_require__(19)(module))},494:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(a(0));!function(){var t=a(14).enterModule;t&&t(e)}();var n=function(){return r.default.createElement("div",{className:"ssu-aws-guide"},r.default.createElement("strong",null,"Define access keys in wp-config.php"),r.default.createElement("p",null,"Copy the following snippet near the top of your wp-config.php and replace your ",r.default.createElement("a",{target:"_blank",rel:"noopener",href:"https://preventdirectaccess.com/docs/upload-wordpress-files-directly-to-amazon-s3-bucket/"},"AWS access keys")," or ",r.default.createElement("a",{target:"_blank",rel:"noopener",href:"https://preventdirectaccess.com/docs/create-wasabi-bucket-get-access-keys/"},"Wasabi access keys")," accordingly. Once done, refresh this page and start uploading files to Wasabi cloud storage. "),r.default.createElement("div",null,r.default.createElement("textarea",{rows:"8",cols:"60"},["define('SSU_PROVIDER', 'aws'); // put either aws or wasabi","define('SSU_KEY', 'your-access-key');","define('SSU_SECRET', 'your-access-secret');","define('SSU_BUCKET', 'your-bucket');","define('SSU_FOLDER', 'your-bucket-folder'); // optional","define('SSU_REGION', 'your-bucket-region');","define('SSU_SURL_EXPIRY', 60); // in seconds","define('SSU_CAPABILITY', 'manage_options'); // optional"].join("\n"))))},o=n;t.default=o,function(){var t=a(14).default,r=a(14).leaveModule;t&&(t.register(n,"AWSGuide","/root/s3-smart-upload/client/app/app/components/AWSGuide.js"),t.register(o,"default","/root/s3-smart-upload/client/app/app/components/AWSGuide.js"),r(e))}()}).call(this,a(19)(e))},514:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=o(a(0)),n=o(a(515));function o(e){return e&&e.__esModule?e:{default:e}}!function(){var t=a(14).enterModule;t&&t(e)}();var s=function(e){var t=e.pluginInfo;return r.default.createElement("div",{className:"s3-manager"},r.default.createElement(n.default,{pluginInfo:t}))},l=s;t.default=l,function(){var t=a(14).default,r=a(14).leaveModule;t&&(t.register(s,"Dashboard","/root/s3-smart-upload/client/app/app/pages/dashboard/index.js"),t.register(l,"default","/root/s3-smart-upload/client/app/app/pages/dashboard/index.js"),r(e))}()}).call(this,a(19)(e))},515:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=s(a(0)),n=a(125),o=s(a(911));s(a(435));function s(e){return e&&e.__esModule?e:{default:e}}!function(){var t=a(14).enterModule;t&&t(e)}();var l=n.Tabs.TabPane;function i(e){console.log(e)}var u=function(e){var t=e.pluginInfo;return r.default.createElement(n.Tabs,{defaultActiveKey:"1",onChange:i},r.default.createElement(l,{tab:"Manager",key:"1"},r.default.createElement(o.default,{pluginInfo:t})))},c=u;t.default=c,function(){var t=a(14).default,r=a(14).leaveModule;t&&(t.register(l,"TabPane","/root/s3-smart-upload/client/app/app/components/Tabs/index.js"),t.register(i,"callback","/root/s3-smart-upload/client/app/app/components/Tabs/index.js"),t.register(u,"HomeTabs","/root/s3-smart-upload/client/app/app/components/Tabs/index.js"),t.register(c,"default","/root/s3-smart-upload/client/app/app/components/Tabs/index.js"),r(e))}()}).call(this,a(19)(e))},569:function(e,t,a){var r={"./af":226,"./af.js":226,"./ar":227,"./ar-dz":228,"./ar-dz.js":228,"./ar-kw":229,"./ar-kw.js":229,"./ar-ly":230,"./ar-ly.js":230,"./ar-ma":231,"./ar-ma.js":231,"./ar-sa":232,"./ar-sa.js":232,"./ar-tn":233,"./ar-tn.js":233,"./ar.js":227,"./az":234,"./az.js":234,"./be":235,"./be.js":235,"./bg":236,"./bg.js":236,"./bm":237,"./bm.js":237,"./bn":238,"./bn-bd":239,"./bn-bd.js":239,"./bn.js":238,"./bo":240,"./bo.js":240,"./br":241,"./br.js":241,"./bs":242,"./bs.js":242,"./ca":243,"./ca.js":243,"./cs":244,"./cs.js":244,"./cv":245,"./cv.js":245,"./cy":246,"./cy.js":246,"./da":247,"./da.js":247,"./de":248,"./de-at":249,"./de-at.js":249,"./de-ch":250,"./de-ch.js":250,"./de.js":248,"./dv":251,"./dv.js":251,"./el":252,"./el.js":252,"./en-au":253,"./en-au.js":253,"./en-ca":254,"./en-ca.js":254,"./en-gb":255,"./en-gb.js":255,"./en-ie":256,"./en-ie.js":256,"./en-il":257,"./en-il.js":257,"./en-in":258,"./en-in.js":258,"./en-nz":259,"./en-nz.js":259,"./en-sg":260,"./en-sg.js":260,"./eo":261,"./eo.js":261,"./es":262,"./es-do":263,"./es-do.js":263,"./es-mx":264,"./es-mx.js":264,"./es-us":265,"./es-us.js":265,"./es.js":262,"./et":266,"./et.js":266,"./eu":267,"./eu.js":267,"./fa":268,"./fa.js":268,"./fi":269,"./fi.js":269,"./fil":270,"./fil.js":270,"./fo":271,"./fo.js":271,"./fr":272,"./fr-ca":273,"./fr-ca.js":273,"./fr-ch":274,"./fr-ch.js":274,"./fr.js":272,"./fy":275,"./fy.js":275,"./ga":276,"./ga.js":276,"./gd":277,"./gd.js":277,"./gl":278,"./gl.js":278,"./gom-deva":279,"./gom-deva.js":279,"./gom-latn":280,"./gom-latn.js":280,"./gu":281,"./gu.js":281,"./he":282,"./he.js":282,"./hi":283,"./hi.js":283,"./hr":284,"./hr.js":284,"./hu":285,"./hu.js":285,"./hy-am":286,"./hy-am.js":286,"./id":287,"./id.js":287,"./is":288,"./is.js":288,"./it":289,"./it-ch":290,"./it-ch.js":290,"./it.js":289,"./ja":291,"./ja.js":291,"./jv":292,"./jv.js":292,"./ka":293,"./ka.js":293,"./kk":294,"./kk.js":294,"./km":295,"./km.js":295,"./kn":296,"./kn.js":296,"./ko":297,"./ko.js":297,"./ku":298,"./ku.js":298,"./ky":299,"./ky.js":299,"./lb":300,"./lb.js":300,"./lo":301,"./lo.js":301,"./lt":302,"./lt.js":302,"./lv":303,"./lv.js":303,"./me":304,"./me.js":304,"./mi":305,"./mi.js":305,"./mk":306,"./mk.js":306,"./ml":307,"./ml.js":307,"./mn":308,"./mn.js":308,"./mr":309,"./mr.js":309,"./ms":310,"./ms-my":311,"./ms-my.js":311,"./ms.js":310,"./mt":312,"./mt.js":312,"./my":313,"./my.js":313,"./nb":314,"./nb.js":314,"./ne":315,"./ne.js":315,"./nl":316,"./nl-be":317,"./nl-be.js":317,"./nl.js":316,"./nn":318,"./nn.js":318,"./oc-lnc":319,"./oc-lnc.js":319,"./pa-in":320,"./pa-in.js":320,"./pl":321,"./pl.js":321,"./pt":322,"./pt-br":323,"./pt-br.js":323,"./pt.js":322,"./ro":324,"./ro.js":324,"./ru":325,"./ru.js":325,"./sd":326,"./sd.js":326,"./se":327,"./se.js":327,"./si":328,"./si.js":328,"./sk":329,"./sk.js":329,"./sl":330,"./sl.js":330,"./sq":331,"./sq.js":331,"./sr":332,"./sr-cyrl":333,"./sr-cyrl.js":333,"./sr.js":332,"./ss":334,"./ss.js":334,"./sv":335,"./sv.js":335,"./sw":336,"./sw.js":336,"./ta":337,"./ta.js":337,"./te":338,"./te.js":338,"./tet":339,"./tet.js":339,"./tg":340,"./tg.js":340,"./th":341,"./th.js":341,"./tk":342,"./tk.js":342,"./tl-ph":343,"./tl-ph.js":343,"./tlh":344,"./tlh.js":344,"./tr":345,"./tr.js":345,"./tzl":346,"./tzl.js":346,"./tzm":347,"./tzm-latn":348,"./tzm-latn.js":348,"./tzm.js":347,"./ug-cn":349,"./ug-cn.js":349,"./uk":350,"./uk.js":350,"./ur":351,"./ur.js":351,"./uz":352,"./uz-latn":353,"./uz-latn.js":353,"./uz.js":352,"./vi":354,"./vi.js":354,"./x-pseudo":355,"./x-pseudo.js":355,"./yo":356,"./yo.js":356,"./zh-cn":357,"./zh-cn.js":357,"./zh-hk":358,"./zh-hk.js":358,"./zh-mo":359,"./zh-mo.js":359,"./zh-tw":360,"./zh-tw.js":360};function n(e){var t=o(e);return a(t)}function o(e){var t=r[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}n.keys=function(){return Object.keys(r)},n.resolve=o,e.exports=n,n.id=569},73:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),function(){var t=a(14).enterModule;t&&t(e)}();var r=window.ssuData.home_url,n=t.AXIOS_CONFIG=function(){return{baseURL:r+"ssu/v1/",timeout:1e4,headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","X-WP-Nonce":window.ssuData.nonce}}},o=t.API={WP_MEDIA:"wp-media",ADD_FILE_TO_MEDIA:"add-file-to-media",AWS_OPTIONS:"aws-options",BUILD_AWS_STACK:"api-stack",GET_PLUGIN_INFO:"plugin",S3_FILE:"s3",S3_OBJECTS:"s3/objects",SET_OBJECT_ACL:"s3/object/acl",PRESIGNED_URL:"s3/sign"},s=t.ACTIONS={FETCH_AWS_OPTIONS:"FETCH_AWS_OPTIONS",UPDATE_AWS_OPTIONS:"UPDATE_AWS_OPTIONS",BUILD_AWS_STACK:"BUILD_AWS_STACK",BUILD_AWS_STACK_STATUS:"BUILD_AWS_STACK_STATUS",GET_PLUGIN_INFO:"GET_PLUGIN_INFO",S3_FILE:"S3_FILE"};!function(){var t=a(14).default,l=a(14).leaveModule;t&&(t.register(r,"rootDomain","/root/s3-smart-upload/client/app/app/actions/configs.js"),t.register(n,"AXIOS_CONFIG","/root/s3-smart-upload/client/app/app/actions/configs.js"),t.register(o,"API","/root/s3-smart-upload/client/app/app/actions/configs.js"),t.register(s,"ACTIONS","/root/s3-smart-upload/client/app/app/actions/configs.js"),l(e))}()}).call(this,a(19)(e))},911:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=l(a(0)),n=a(125),o=l(a(912)),s=a(436);function l(e){return e&&e.__esModule?e:{default:e}}!function(){var t=a(14).enterModule;t&&t(e)}();var i=function(e){var t=e.pluginInfo;return r.default.createElement("div",null,r.default.createElement("div",{className:"ssu-main"},r.default.createElement(n.Row,null,r.default.createElement("h3",{style:{marginBottom:"0.5rem"}},(0,s.getProviderName)()," Bucket Folder Structure"),r.default.createElement("p",null,"Upload your files to S3 directly on the"," ",r.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://preventdirectaccess.com/docs/upload-wordpress-files-directly-to-amazon-s3-bucket/?utm_source=plugin-setting-page&utm_medium=guide-link-below-h3&utm_campaign=s3-smart-upload#upload"},"admin dashboard")," ","or allow users to do so"," ",r.default.createElement("a",{target:"_blank",href:"https://preventdirectaccess.com/docs/shortcodes/?utm_source=plugin-setting-page&utm_medium=guide-link-below-h3&utm_campaign=s3-smart-upload#offload"},"on the front-end"),"."),r.default.createElement(o.default,{hostname:t.s3Hostname,pluginInfo:t,disableSelect:function(){}}))))},u=i;t.default=u,function(){var t=a(14).default,r=a(14).leaveModule;t&&(t.register(i,"S3Manager","/root/s3-smart-upload/client/app/app/components/S3Manager/index.js"),t.register(u,"default","/root/s3-smart-upload/client/app/app/components/S3Manager/index.js"),r(e))}()}).call(this,a(19)(e))},912:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},_createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_antd=__webpack_require__(125),_copyToClipboard=__webpack_require__(190),_copyToClipboard2=_interopRequireDefault(_copyToClipboard),_api=__webpack_require__(139),_api2=_interopRequireDefault(_api),_Uploader=__webpack_require__(435),_Uploader2=_interopRequireDefault(_Uploader);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}!function(){var e=__webpack_require__(14).enterModule;e&&e(module)}(),_antd.notification.config({placement:"topRight",top:40,duration:3});var getDefaultUploadFolder=function(e){return e.prefixKey.length>0?""+e.prefixKey:""},DirectoryTree=_antd.Tree.DirectoryTree,TreeNode=_antd.Tree.TreeNode,Option=_antd.Select.Option,TreeFolder=function(_React$Component){function TreeFolder(e){_classCallCheck(this,TreeFolder);var t=_possibleConstructorReturn(this,(TreeFolder.__proto__||Object.getPrototypeOf(TreeFolder)).call(this,e));_initialiseProps.call(t);var a=e.pluginInfo,r=getDefaultUploadFolder(a);return t.state={treeData:[],loading:!0,loadingACL:!1,key:!1,loadingAddMedia:!1,selectedFolder:r,showUpload:!1,currentFolder:r,folders:[],disabledModal:!1},t}return _inherits(TreeFolder,_React$Component),_createClass(TreeFolder,[{key:"componentDidMount",value:function(){this.maybeFetchFolder()}},{key:"render",value:function(){var e=this,t=this.state,a=t.treeData,r=t.loading,n=t.loadingAddMedia,o=t.showUpload,s=t.selectedFolder,l=t.currentFolder,i=t.folders,u=t.loadingACL,c=t.key,d=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _react2.default.createElement("div",{className:"ssu-container"},_react2.default.createElement("div",{className:"ssu-item"},_react2.default.createElement(_antd.Button,{disabled:t,type:"primary",onClick:e.handleUpload},"Upload File")),_react2.default.createElement("div",{className:"ssu-item"},_react2.default.createElement(_antd.Button,{disabled:!c,onClick:e.clickToCopy},"Copy File URL")),_react2.default.createElement("div",{className:"ssu-item"},_react2.default.createElement(_antd.Button,{disabled:!c,loading:u,onClick:e.makePublic},"Make File Public")),_react2.default.createElement("div",{className:"ssu-item"},_react2.default.createElement(_antd.Button,{disabled:!c,loading:n,onClick:e.addToMedia},"Show in Media Library")),_react2.default.createElement("div",{style:{marginLeft:"auto"}},"Upload to ",_react2.default.createElement(_antd.Select,{style:{width:"150px"},value:l,onChange:e.onChangeFolderSelect},_react2.default.createElement(Option,{value:""},"root"),i.map(function(e,t){return _react2.default.createElement(Option,{value:e,key:t},e)}))," directory"))};return r?_react2.default.createElement("div",null,d(!0),_react2.default.createElement("div",{style:{textAlign:"center",marginTop:"1rem"}},_react2.default.createElement(_antd.Spin,null))):_react2.default.createElement("div",null,d(),_react2.default.createElement(_antd.Card,{bordered:!0,style:{marginTop:"0.5rem",maxHeight:"450px",overflow:"scroll"}},_react2.default.createElement(DirectoryTree,{loading:r,loadData:this.onLoadData,showLine:!0,onSelect:this.onSelect},this.renderTreeNodes(a)),_react2.default.createElement(_antd.Modal,{title:"Upload to folder: "+(s||"root"),visible:o,footer:null,onCancel:this.onCancelModal,maskClosable:!1},_react2.default.createElement(_Uploader2.default,{uploadFolder:s,shouldDisableModal:this.shouldDisableModal}))))}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),TreeFolder}(_react2.default.Component),_initialiseProps=function(){var e=this;this.onLoadData=function(t){return new Promise(function(a){t.props.children?a():e.loadFolder(t.props.dataRef.key).then(function(r){var n=r.treeData;t.props.dataRef.children=n;var o=e.state.treeData;e.setState({treeData:[].concat(_toConsumableArray(o))}),a()})})},this.onSelect=function(t,a){var r=a.selected,n=a.node;if(r){var o=n.props,s=o.isLeaf,l=o.dataRef,i=e.state.currentFolder;if(s){var u=l.key.split("/");u.pop();var c=""+u.join("/");return c?c+="/":c=""+i,void e.setState({selectedFolder:c,key:n.props.dataRef.key})}var d=l.key;e.setState({selectedFolder:d,key:!1})}},this.onCancelModal=function(){var t=e.state,a=t.currentFolder;t.disabledModal?_antd.notification.warn({message:"File upload in progress, please wait until the upload completes."}):(e.fetchFolder(a),e.setState({showUpload:!1,selectedFolder:a,key:!1}))},this.onChangeFolderSelect=function(t){e.setState({currentFolder:t,selectedFolder:t}),e.fetchFolder(t)},this.shouldDisableModal=function(t){e.setState({disabledModal:t})},this.handleUpload=function(){e.setState({showUpload:!0})},this.generateURL=function(e,t){var a=t.split("/"),r=encodeURIComponent(a.pop());return a.push(r),""+e+a.join("/")},this.clickToCopy=function(){var t=e.props.hostname,a=e.state.key,r=e.generateURL(t,a);(0,_copyToClipboard2.default)(r),_antd.notification.success({message:"S3 URL copied to clipboard"})},this.addToMedia=function(){var t=e.props.hostname,a=e.state.key,r=e.generateURL(t,a);e.setState({loadingAddMedia:!0}),_api2.default.addFileToMedia(a,r).then(function(){_antd.notification.success({message:"File added to Media library successfully"})}).catch(function(e){var t=_api2.default.MESSAGE.ERROR;e.response.data&&e.response.data.result&&(t=e.response.data.result),_antd.notification.error({message:t})}).finally(function(){e.setState({loadingAddMedia:!1})})},this.makePublic=function(){e.setState({loadingACL:!0});var t=e.state.key;_api2.default.setObjectAcl(t,"public-read").then(function(){_antd.notification.success({message:"File made public successfully"})}).catch(function(){_antd.notification.error({message:_api2.default.MESSAGE.ERROR})}).finally(function(){e.setState({loadingACL:!1})})},this.maybeFetchFolder=function(){var t=e.state.currentFolder,a=e.props.disableSelect;e.setState({loading:!0}),a(!0),e.loadFolder("").then(function(a){var r=a.treeData,n=a.prefiexes;return t?(e.setState({folders:n}),e.loadFolder(t).then(function(t){var a=t.treeData;e.setState({treeData:a})})):e.setState({treeData:r,folders:n})}).finally(function(){e.setState({loading:!1}),a(!1)})},this.loadFolder=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise(function(t,a){_api2.default.listObjects(e).then(function(a){var r=a.data.result,n=r.CommonPrefixes,o=r.Contents,s=n&&n.length>0?n.map(function(e){return e.Prefix}):[],l=[];n&&n.length>0&&n.forEach(function(t){0!==t.Prefix.localeCompare(e)&&l.push({key:t.Prefix,title:t.Prefix.replace(e,"")})}),o&&o.length>0&&o.forEach(function(t){0!==t.Key.localeCompare(e)&&l.push({key:t.Key,title:t.Key.replace(e,""),isLeaf:!0})}),t({treeData:l,prefiexes:s})}).catch(function(e){a(e),_antd.notification.error({message:_api2.default.MESSAGE.ERROR})})})},this.fetchFolder=function(t){var a=e.props.disableSelect;e.setState({loading:!0}),a(!0),e.loadFolder(t).then(function(t){var a=t.treeData;e.setState({treeData:a})}).finally(function(){e.setState({loading:!1}),a(!1)})},this.renderTreeNodes=function(t){return t.map(function(t){return t.children?_react2.default.createElement(TreeNode,{title:t.title,key:t.key,dataRef:t},e.renderTreeNodes(t.children)):_react2.default.createElement(TreeNode,_extends({key:t.key},t,{dataRef:t}))})}},_default=TreeFolder;exports.default=_default,function(){var e=__webpack_require__(14).default,t=__webpack_require__(14).leaveModule;e&&(e.register(getDefaultUploadFolder,"getDefaultUploadFolder","/root/s3-smart-upload/client/app/app/components/TreeFolder.js"),e.register(DirectoryTree,"DirectoryTree","/root/s3-smart-upload/client/app/app/components/TreeFolder.js"),e.register(TreeNode,"TreeNode","/root/s3-smart-upload/client/app/app/components/TreeFolder.js"),e.register(Option,"Option","/root/s3-smart-upload/client/app/app/components/TreeFolder.js"),e.register(TreeFolder,"TreeFolder","/root/s3-smart-upload/client/app/app/components/TreeFolder.js"),e.register(_default,"default","/root/s3-smart-upload/client/app/app/components/TreeFolder.js"),t(module))}()}).call(this,__webpack_require__(19)(module))},913:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),function(){var t=a(14).enterModule;t&&t(e)}();var r=function(e){if(window.ssuData&&!window.ssuData.enable_restriction)return!0;return e.size<=1e6*window.ssuData.max_file_size},n=function(e){return e.size<=512e7},o={isAllowedFileSize:r,isS3FileSize:n};t.default=o,function(){var t=a(14).default,s=a(14).leaveModule;t&&(t.register(r,"isAllowedFileSize","/root/s3-smart-upload/client/app/common/fileUtil.js"),t.register(n,"isS3FileSize","/root/s3-smart-upload/client/app/common/fileUtil.js"),t.register(o,"default","/root/s3-smart-upload/client/app/common/fileUtil.js"),s(e))}()}).call(this,a(19)(e))},914:function(e,t,a){"use strict";t.getSizeForImage=function(e){return new Promise(function(t){var a=window.URL.createObjectURL(e),r=new Image;r.onload=function(){var a={name:e.name,size:e.size,width:r.width,height:r.height};t(a)},r.src=a})}},915:function(e,t){},916:function(e,t){}});
//# sourceMappingURL=main.ssu.js.map